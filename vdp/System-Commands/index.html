
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../PLOT-Commands/">
      
      
        <link rel="next" href="../Enhanced-Audio-API/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>System Commands - Community Agon Platform documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#vdu-23-0-0a-n-set-cursor-start-line-and-appearance" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Community Agon Platform documentation" class="md-header__button md-logo" aria-label="Community Agon Platform documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Community Agon Platform documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              System Commands
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="lime"  aria-label="Switch to your system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to your system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/AgonPlatform/agon-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    contribute
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Community Agon Platform documentation" class="md-nav__button md-logo" aria-label="Community Agon Platform documentation" data-md-component="logo">
      
  <img src="../../assets/logo.png" alt="logo">

    </a>
    Community Agon Platform documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AgonPlatform/agon-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    contribute
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Welcome & getting started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Welcome & getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Start here
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Theory-of-operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory of operation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    MOS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            MOS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../MOS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mos/Star-Commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mos/API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mos/C-Functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mos/Executables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Executable format
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mos/Modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mos/System-Variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mos/Argument-Substitution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Argument Substitution
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    VDP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            VDP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../VDP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VDU-Commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Main Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Screen-Modes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Screen Modes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../PLOT-Commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PLOT Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    System Commands
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    System Commands
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-0a-n-set-cursor-start-line-and-appearance" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;0A, n: Set cursor start line and appearance §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-0b-n-set-cursor-end-line" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;0B, n: Set cursor end line §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-80-n-general-poll" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;80, n: General poll
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-81-n-set-the-keyboard-locale" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;81, n: Set the keyboard locale
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-82-request-text-cursor-position" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;82: Request text cursor position
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-83-x-y-get-ascii-code-of-character-at-character-position-x-y" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;83, x; y;: Get ASCII code of character at character position x, y
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-84-x-y-get-colour-of-pixel-at-pixel-position-x-y" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;84, x; y;: Get colour of pixel at pixel position x, y
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-85-channel-command-args-audio-commands" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;85, channel, command, &lt;args&gt;: Audio commands
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-86-fetch-the-screen-dimensions" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;86: Fetch the screen dimensions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-87-rtc-control" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;87: RTC control *
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-88-delay-rate-led-keyboard-control" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;88, delay; rate; led: Keyboard Control *
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-89-command-args-mouse-control" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, command, [&lt;args&gt;]: Mouse control **
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VDU 23, 0, &amp;89, command, [&lt;args&gt;]: Mouse control **">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-0-enable-the-mouse" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 0: Enable the mouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-1-disable-the-mouse" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 1: Disable the mouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-2-reset-the-mouse" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 2: Reset the mouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-3-cursorid-set-mouse-cursor" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 3, cursorId;: Set mouse cursor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-4-x-y-set-mouse-cursor-position" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 4, x; y;: Set mouse cursor position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-5-x1-y1-x2-y2-reserved" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 5, x1; y1; x2; y2;: Reserved
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-6-samplerate-set-mouse-sample-rate" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 6, sampleRate: Set mouse sample rate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-7-resolution-set-mouse-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 7, resolution: Set mouse resolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-8-scaling-set-mouse-scaling" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 8, scaling: Set mouse scaling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-9-acceleration-set-mouse-acceleration" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 9, acceleration;: Set mouse acceleration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-10-wheelacceleration-wheelacchighbyte-set-mouse-wheel-acceleration-accepts-a-24-bit-value" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 10, wheelAcceleration; wheelAccHighByte: Set mouse wheel acceleration (accepts a 24-bit value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mouse-data-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Mouse data packets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-8a-n-set-the-cursor-start-column" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;8A, n: Set the cursor start column §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-8b-n-set-the-cursor-end-column" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;8B, n: Set the cursor end column §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-8c-x-y-relative-cursor-movement-by-pixels" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;8C, x; y;: Relative cursor movement (by pixels) §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-90" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;90, n, b1, b2, b3, b4, b5, b6, b7, b8: Redefine character n (0-255) with 8 bytes of data §
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-91" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;91: Reset all system font characters to original definition §
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-92" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;92, char, bitmapId;: Map character char to display bitmapId §§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-93-x-y-get-ascii-code-of-character-at-graphics-position-x-y" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;93, x; y;: Get ASCII code of character at graphics position x, y §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-94-n-read-colour-palette-entry-n-returns-a-pixel-colour-data-packet" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;94, n: Read colour palette entry n (returns a pixel colour data packet) §§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-95-command-args-font-management-commands" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;95, &lt;command&gt;, [&lt;args&gt;]: Font management commands §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-96-flags-bufferid-set-an-affine-transform-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;96, &lt;flags&gt;, &lt;bufferId&gt;;: Set an affine transform matrix §§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-98-n-turn-control-keys-on-and-off" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;98, n: Turn control keys on and off §§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-99-virtualkey-request-updated-keyboard-data-for-a-key" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;99, virtualKey: Request updated keyboard data for a key §§§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9a" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23,0, &amp;9A: Temporarily enable paged mode §§§§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9b-bufferid-print-the-contents-of-a-buffer-to-the-screen" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9B, bufferId;: Print the contents of a buffer to the screen §§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9c-set-the-text-viewport-using-graphics-coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9C: Set the text viewport using graphics coordinates §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9d-set-the-graphics-viewport-using-graphics-coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9D: Set the graphics viewport using graphics coordinates §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9e-set-the-graphics-origin-using-graphics-coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9E: Set the graphics origin using graphics coordinates §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9f-move-the-graphics-origin-and-viewports" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9F: Move the graphics origin and viewports §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-a0-bufferid-command-args-buffered-command-api" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;A0, &lt;bufferId&gt;, &lt;command&gt;, [&lt;args&gt;]: Buffered command API **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-a1-update-vdp-for-exclusive-use-of-the-agon-flash-tool" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;A1: Update VDP (for exclusive use of the agon-flash tool) **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c0-n-turn-logical-screen-scaling-on-and-off" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C0, n: Turn logical screen scaling on and off *
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c1-n-switch-legacy-modes-on-or-off" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C1, n: Switch legacy modes on or off **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c3-swap-the-screen-buffer-andor-wait-for-vsync" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C3: Swap the screen buffer and/or wait for VSYNC **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c4-command-args-copper-functions" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C4, command, [&lt;args&gt;]: "Copper" functions §§§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c8-command-args-context-management-api" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C8, &lt;command&gt;, [&lt;args&gt;]: Context management API §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-ca-flush-current-drawing-commands" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;CA: Flush current drawing commands §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-f2-n-set-dot-dash-pattern-length" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;F2, n: Set dot-dash pattern length §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-f8-variableid-value-set-a-vdp-variable" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;F8, variableId; value;: Set a VDP Variable §§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-f9-variableid-clear-a-vdp-variable" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;F9, variableId;: Clear a VDP Variable §§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-fe-n-console-mode" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;FE, n: Console mode **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-ff-switch-to-or-resume-terminal-mode" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;FF: Switch to or resume "terminal mode"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdp-serial-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      VDP Serial Protocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VDP Serial Protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keyboard" class="md-nav__link">
    <span class="md-ellipsis">
      Keyboard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Enhanced-Audio-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Audio API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Bitmaps-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bitmaps and Sprites API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Buffered-Commands-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Buffered Commands API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Context-Management-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Management API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Font-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Font Management API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VDP-Variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VDP Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Copper-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Copper Effects API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../BBC-BASIC-for-Agon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BBC Basic
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../GPIO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPIO
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Updating-Firmware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Updating Firmware
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Additional resources
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Additional resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../External-Documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    External documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Third-Party-Projects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Third party projects
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-0a-n-set-cursor-start-line-and-appearance" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;0A, n: Set cursor start line and appearance §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-0b-n-set-cursor-end-line" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;0B, n: Set cursor end line §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-80-n-general-poll" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;80, n: General poll
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-81-n-set-the-keyboard-locale" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;81, n: Set the keyboard locale
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-82-request-text-cursor-position" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;82: Request text cursor position
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-83-x-y-get-ascii-code-of-character-at-character-position-x-y" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;83, x; y;: Get ASCII code of character at character position x, y
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-84-x-y-get-colour-of-pixel-at-pixel-position-x-y" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;84, x; y;: Get colour of pixel at pixel position x, y
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-85-channel-command-args-audio-commands" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;85, channel, command, &lt;args&gt;: Audio commands
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-86-fetch-the-screen-dimensions" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;86: Fetch the screen dimensions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-87-rtc-control" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;87: RTC control *
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-88-delay-rate-led-keyboard-control" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;88, delay; rate; led: Keyboard Control *
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-89-command-args-mouse-control" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, command, [&lt;args&gt;]: Mouse control **
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VDU 23, 0, &amp;89, command, [&lt;args&gt;]: Mouse control **">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-0-enable-the-mouse" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 0: Enable the mouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-1-disable-the-mouse" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 1: Disable the mouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-2-reset-the-mouse" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 2: Reset the mouse
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-3-cursorid-set-mouse-cursor" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 3, cursorId;: Set mouse cursor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-4-x-y-set-mouse-cursor-position" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 4, x; y;: Set mouse cursor position
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-5-x1-y1-x2-y2-reserved" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 5, x1; y1; x2; y2;: Reserved
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-6-samplerate-set-mouse-sample-rate" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 6, sampleRate: Set mouse sample rate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-7-resolution-set-mouse-resolution" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 7, resolution: Set mouse resolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-8-scaling-set-mouse-scaling" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 8, scaling: Set mouse scaling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-9-acceleration-set-mouse-acceleration" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 9, acceleration;: Set mouse acceleration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vdu-23-0-89-10-wheelacceleration-wheelacchighbyte-set-mouse-wheel-acceleration-accepts-a-24-bit-value" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;89, 10, wheelAcceleration; wheelAccHighByte: Set mouse wheel acceleration (accepts a 24-bit value)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mouse-data-packets" class="md-nav__link">
    <span class="md-ellipsis">
      Mouse data packets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-8a-n-set-the-cursor-start-column" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;8A, n: Set the cursor start column §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-8b-n-set-the-cursor-end-column" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;8B, n: Set the cursor end column §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-8c-x-y-relative-cursor-movement-by-pixels" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;8C, x; y;: Relative cursor movement (by pixels) §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-90" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;90, n, b1, b2, b3, b4, b5, b6, b7, b8: Redefine character n (0-255) with 8 bytes of data §
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-91" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;91: Reset all system font characters to original definition §
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-92" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;92, char, bitmapId;: Map character char to display bitmapId §§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-93-x-y-get-ascii-code-of-character-at-graphics-position-x-y" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;93, x; y;: Get ASCII code of character at graphics position x, y §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-94-n-read-colour-palette-entry-n-returns-a-pixel-colour-data-packet" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;94, n: Read colour palette entry n (returns a pixel colour data packet) §§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-95-command-args-font-management-commands" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;95, &lt;command&gt;, [&lt;args&gt;]: Font management commands §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-96-flags-bufferid-set-an-affine-transform-matrix" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;96, &lt;flags&gt;, &lt;bufferId&gt;;: Set an affine transform matrix §§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-98-n-turn-control-keys-on-and-off" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;98, n: Turn control keys on and off §§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-99-virtualkey-request-updated-keyboard-data-for-a-key" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;99, virtualKey: Request updated keyboard data for a key §§§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9a" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23,0, &amp;9A: Temporarily enable paged mode §§§§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9b-bufferid-print-the-contents-of-a-buffer-to-the-screen" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9B, bufferId;: Print the contents of a buffer to the screen §§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9c-set-the-text-viewport-using-graphics-coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9C: Set the text viewport using graphics coordinates §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9d-set-the-graphics-viewport-using-graphics-coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9D: Set the graphics viewport using graphics coordinates §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9e-set-the-graphics-origin-using-graphics-coordinates" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9E: Set the graphics origin using graphics coordinates §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-9f-move-the-graphics-origin-and-viewports" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;9F: Move the graphics origin and viewports §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-a0-bufferid-command-args-buffered-command-api" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;A0, &lt;bufferId&gt;, &lt;command&gt;, [&lt;args&gt;]: Buffered command API **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-a1-update-vdp-for-exclusive-use-of-the-agon-flash-tool" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;A1: Update VDP (for exclusive use of the agon-flash tool) **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c0-n-turn-logical-screen-scaling-on-and-off" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C0, n: Turn logical screen scaling on and off *
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c1-n-switch-legacy-modes-on-or-off" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C1, n: Switch legacy modes on or off **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c3-swap-the-screen-buffer-andor-wait-for-vsync" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C3: Swap the screen buffer and/or wait for VSYNC **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c4-command-args-copper-functions" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C4, command, [&lt;args&gt;]: "Copper" functions §§§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-c8-command-args-context-management-api" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;C8, &lt;command&gt;, [&lt;args&gt;]: Context management API §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-ca-flush-current-drawing-commands" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;CA: Flush current drawing commands §§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-f2-n-set-dot-dash-pattern-length" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;F2, n: Set dot-dash pattern length §§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-f8-variableid-value-set-a-vdp-variable" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;F8, variableId; value;: Set a VDP Variable §§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-f9-variableid-clear-a-vdp-variable" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;F9, variableId;: Clear a VDP Variable §§§§§§
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-fe-n-console-mode" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;FE, n: Console mode **
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdu-23-0-ff-switch-to-or-resume-terminal-mode" class="md-nav__link">
    <span class="md-ellipsis">
      VDU 23, 0, &amp;FF: Switch to or resume "terminal mode"
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vdp-serial-protocol" class="md-nav__link">
    <span class="md-ellipsis">
      VDP Serial Protocol
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VDP Serial Protocol">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keyboard" class="md-nav__link">
    <span class="md-ellipsis">
      Keyboard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/AgonPlatform/agon-docs/edit/main/docs/vdp/System-Commands.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="vdp-system-commands">VDP System Commands</h1>
<p><code>VDU 23, 0</code> is reserved for commands sent to the VDP.  These are largely unique to the Agon, and are used to access some of the more sophisticated features of the VDP.</p>
<p>Some of the commands are used for operating system functionality, and will not usually need to be used by user applications, whilst others allow access to features that applications will want to use.</p>
<p>Please note that not all versions of the VDP support the complete command set.  The following list uses the following symbols to indicate which VDP versions support which commands:</p>
<p>* Requires VDP 1.03 or above<br>
 ** Requires VDP 1.04 or above<br>
 § Requires Console8 VDP 2.3.0 or above<br>
 §§ Requires Console8 VDP 2.4.0 or above<br>
 §§§ Requires Console8 VDP 2.6.0 or above<br>
 §§§§ Requires Console8 VDP 2.7.0 or above<br>
 §§§§§ Requires Console8 VDP 2.8.0 or above<br>
 §§§§§§ Requires Console8 VDP 2.9.0 or above<br>
 §§§§§§§ Requires Console8 VDP 2.12.0 or above<br>
 §§§§§§§§ Requires Console8 VDP 2.14.0 or above<br></p>
<p>Commands between &amp;80 and &amp;89 will return their data back to the eZ80 via the <a href="#vdp-serial-protocol">VDP serial protocol</a>.</p>
<p>NB:</p>
<ul>
<li>Prior to MOS 1.03 the subset commands that it supported were indexed from &amp;00, not &amp;80. For example, <code>VDU 23, 0, &amp;02</code> to request the cursor position.  Commands in the range &amp;00-&amp;7F were used on Acorn systems to control the VDU hardware, so to avoid conflicts, and to allow for the possibility of supporting some of those commands, Agon commands were re-indexed from &amp;80.</li>
</ul>
<h2 id="vdu-23-0-0a-n-set-cursor-start-line-and-appearance"><code>VDU 23, 0, &amp;0A, n</code>: Set cursor start line and appearance §§§§</h2>
<p>This command defines the start line (or row) of the cursor and its appearance.  Bits 0-4 define the start line of the cursor, and bits 5-6 define the cursor appearance.  The meaning of the appearance bits are as follows:</p>
<table>
<thead>
<tr>
<th>Bit 6</th>
<th>Bit 5</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>Steady</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>Off</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>Fast blink</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>Slow blink</td>
</tr>
</tbody>
</table>
<p>By default, the start line is zero, and the cursor appearance is a slow blink.</p>
<p>This command works in conjunction with <code>VDU 23, 0, &amp;0B, n</code>, <code>VDU 23, 0, &amp;8A, n</code>, and <code>VDU 23, 0, &amp;8B, n</code> to define how the cursor will be drawn on screen.</p>
<p>The cursor start line must be less than the current font height (which is currently 8 pixels, and cannot currently be adjusted).</p>
<p>Support for this command was introduced in the Console8 VDP 2.7.0.  Its behaviour is compatible with the equivalent commands on the Acorn BBC Micro and RISC OS.</p>
<h2 id="vdu-23-0-0b-n-set-cursor-end-line"><code>VDU 23, 0, &amp;0B, n</code>: Set cursor end line §§§§</h2>
<p>This defines the end line of the cursor.  The displayed cursor will be drawn from the start line to the end line.  The end line must be greater than the start line, and less than the current font height.</p>
<p>Together with the start line, this command defines the vertical size of the cursor.</p>
<p>If the start and end lines are equal then the cursor will be drawn as a horizontal line.  If the end line value is less than the start line value then the cursor will not be drawn.  If a value is given that is greater than the current font height then the cursor will be drawn to the end of the font height.</p>
<h2 id="vdu-23-0-80-n-general-poll"><code>VDU 23, 0, &amp;80, n</code>: General poll</h2>
<p>This command will echo back <code>n</code> to MOS (see <a href="#vdp-serial-protocol">VDP Serial Protocol</a>)</p>
<p>This command is used by MOS and the VDP to synchronise with each other during the system start-up process.  It is not intended to be used by applications.</p>
<h2 id="vdu-23-0-81-n-set-the-keyboard-locale"><code>VDU 23, 0, &amp;81, n</code>: Set the keyboard locale</h2>
<p>Sets the keyboard to a given locale/format.  The following locales are supported:</p>
<table>
<thead>
<tr>
<th>Locale</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>UK</td>
</tr>
<tr>
<td>1</td>
<td>US</td>
</tr>
<tr>
<td>2</td>
<td>German</td>
</tr>
<tr>
<td>3</td>
<td>Italian</td>
</tr>
<tr>
<td>4</td>
<td>Spanish</td>
</tr>
<tr>
<td>5</td>
<td>French</td>
</tr>
<tr>
<td>6</td>
<td>Belgian</td>
</tr>
<tr>
<td>7</td>
<td>Norwegian</td>
</tr>
<tr>
<td>8</td>
<td>Japanese **</td>
</tr>
<tr>
<td>9</td>
<td>US International **</td>
</tr>
<tr>
<td>10</td>
<td>US International Alternate **</td>
</tr>
<tr>
<td>11</td>
<td>Swiss German **</td>
</tr>
<tr>
<td>12</td>
<td>Swiss French **</td>
</tr>
<tr>
<td>13</td>
<td>Danish **</td>
</tr>
<tr>
<td>14</td>
<td>Swedish **</td>
</tr>
<tr>
<td>15</td>
<td>Portuguese **</td>
</tr>
<tr>
<td>16</td>
<td>Brazilian Portuguese §</td>
</tr>
<tr>
<td>17</td>
<td>Dvorak §</td>
</tr>
</tbody>
</table>
<p>Any other value will be interpreted as UK.</p>
<h2 id="vdu-23-0-82-request-text-cursor-position"><code>VDU 23, 0, &amp;82</code>: Request text cursor position</h2>
<p>This command will return the current text cursor position to MOS.  Once the cursor position has been returned the text cursor position data inside MOS's <a href="../../mos/API/#sysvars">system state variables</a> will be updated to reflect the current cursor position.</p>
<h2 id="vdu-23-0-83-x-y-get-ascii-code-of-character-at-character-position-x-y"><code>VDU 23, 0, &amp;83, x; y;</code>: Get ASCII code of character at character position x, y</h2>
<p>This command will return the ASCII code of the character at the given character position to MOS.  There is a corresponding command <code>VDU 23, 0, &amp;93, x; y;</code> that works in the graphics coordinate system.</p>
<p>This command works by comparing pixels on the screen at the given position to the currently selected font, using the currently selected text colour.  This means that it may not always be accurate, or able to succeed.  Redefining system font characters after they have been drawn, changing the font, modifying the definitions of characters within the selected font, changing the text colour, may cause this command to fail.</p>
<p>This command will not recognise characters that have been mapped to bitmaps using <code>VDU 23, 0, &amp;92, char, bitmapId;</code>.</p>
<h2 id="vdu-23-0-84-x-y-get-colour-of-pixel-at-pixel-position-x-y"><code>VDU 23, 0, &amp;84, x; y;</code>: Get colour of pixel at pixel position x, y</h2>
<p>This command will return the colour of the pixel at the given pixel position to MOS.  The corresponding <a href="../../mos/API/#sysvars">MOS sysvars</a> will be updated to reflect the read pixel colour.</p>
<h2 id="vdu-23-0-85-channel-command-args-audio-commands"><code>VDU 23, 0, &amp;85, channel, command, &lt;args&gt;</code>: Audio commands</h2>
<p>Sends a command to the <a href="../Enhanced-Audio-API/">VDP Enhanced Audio API</a> **</p>
<p>Prior to VDP 1.04 this command could only perform what is now audio command zero, which plays a note on a channel.</p>
<h2 id="vdu-23-0-86-fetch-the-screen-dimensions"><code>VDU 23, 0, &amp;86</code>: Fetch the screen dimensions</h2>
<p>Returns the screen dimensions to MOS.  Generally applications should not need to call this, as this information will be automatically sent to MOS when the screen mode is changed.</p>
<h2 id="vdu-23-0-87-rtc-control"><code>VDU 23, 0, &amp;87</code>: RTC control *</h2>
<p>This command controls the Real Time Clock within the Agon VDP.</p>
<ul>
<li>
<p><code>VDU 23, 0, &amp;87, 0</code>: Read the RTC</p>
<ul>
<li>a data packet will be sent to MOS with the current RTC data, and <a href="../../mos/API/#sysvars">MOS sysvars</a> updated accordingly</li>
</ul>
</li>
<li>
<p><code>VDU 23, 0, &amp;87, 1, y, m, d, h, m, s</code>: Set the RTC</p>
</li>
</ul>
<h2 id="vdu-23-0-88-delay-rate-led-keyboard-control"><code>VDU 23, 0, &amp;88, delay; rate; led</code>: Keyboard Control *</h2>
<p>This command controls the keyboard repeat delay, repeat rate, and LED status.</p>
<p>Only delay values between 250 and 1000 are supported, and represents a time in milliseconds before the key will start repeating.</p>
<p>The rate value represents the time between key repeats, and is given in milliseconds.  Values from 33-500 are supported.</p>
<p>The LED value is a bit mask that controls the state of the keyboard LEDs.  The following bits are defined:</p>
<table>
<thead>
<tr>
<th>Bit</th>
<th>Name</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Scroll Lock</td>
<td>If set then the Scroll Lock LED will be turned on.  If clear then it will be turned off.</td>
</tr>
<tr>
<td>1</td>
<td>Caps Lock</td>
<td>If set then the Caps Lock LED will be turned on.  If clear then it will be turned off.</td>
</tr>
<tr>
<td>2</td>
<td>Num Lock</td>
<td>If set then the Num Lock LED will be turned on.  If clear then it will be turned off.</td>
</tr>
</tbody>
</table>
<h2 id="vdu-23-0-89-command-args-mouse-control"><code>VDU 23, 0, &amp;89, command, [&lt;args&gt;]</code>: Mouse control **</h2>
<p>Commands beginning with <code>VDU 23, 0, &amp;89</code> are reserved for mouse control, and are implemented from VDP 1.04 onwards.</p>
<h3 id="vdu-23-0-89-0-enable-the-mouse"><code>VDU 23, 0, &amp;89, 0</code>: Enable the mouse</h3>
<p>Enables the mouse cursor, and will start sending mouse data packets to MOS.</p>
<p>If there is no mouse connected then this command will have no effect.</p>
<h3 id="vdu-23-0-89-1-disable-the-mouse"><code>VDU 23, 0, &amp;89, 1</code>: Disable the mouse</h3>
<p>Disables the mouse cursor, and will stop sending mouse data packets to MOS.</p>
<h3 id="vdu-23-0-89-2-reset-the-mouse"><code>VDU 23, 0, &amp;89, 2</code>: Reset the mouse</h3>
<p>Resets the mouse system restoring default settings.</p>
<h3 id="vdu-23-0-89-3-cursorid-set-mouse-cursor"><code>VDU 23, 0, &amp;89, 3, cursorId;</code>: Set mouse cursor</h3>
<p>Sets the mouse cursor to the given cursor ID.</p>
<p>There are several built-in mouse cursors that are available for use.  These have been inherited from fab-gl and are numbered from 0-18.  The "Cursor" column in the table below shows the fab-gl name for the cursor.</p>
<table>
<thead>
<tr>
<th>ID</th>
<th>Cursor</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>PointerAmigaLike</td>
<td>11x11 Amiga like colored mouse pointer</td>
</tr>
<tr>
<td>1</td>
<td>PointerSimpleReduced</td>
<td>10x15 mouse pointer</td>
</tr>
<tr>
<td>2</td>
<td>PointerSimple</td>
<td>11x19 mouse pointer</td>
</tr>
<tr>
<td>3</td>
<td>PointerShadowed</td>
<td>11x19 shadowed mouse pointer</td>
</tr>
<tr>
<td>4</td>
<td>Pointer</td>
<td>12x17 mouse pointer</td>
</tr>
<tr>
<td>5</td>
<td>Pen</td>
<td>16x16 pen</td>
</tr>
<tr>
<td>6</td>
<td>Cross1</td>
<td>9x9 cross</td>
</tr>
<tr>
<td>7</td>
<td>Cross2</td>
<td>11x11 cross</td>
</tr>
<tr>
<td>8</td>
<td>Point</td>
<td>5x5 point</td>
</tr>
<tr>
<td>9</td>
<td>LeftArrow</td>
<td>11x11 left arrow</td>
</tr>
<tr>
<td>10</td>
<td>RightArrow</td>
<td>11x11 right arrow</td>
</tr>
<tr>
<td>11</td>
<td>DownArrow</td>
<td>11x11 down arrow</td>
</tr>
<tr>
<td>12</td>
<td>UpArrow</td>
<td>11x11 up arrow</td>
</tr>
<tr>
<td>13</td>
<td>Move</td>
<td>19x19 move</td>
</tr>
<tr>
<td>14</td>
<td>Resize1</td>
<td>12x12 resize orientation 1</td>
</tr>
<tr>
<td>15</td>
<td>Resize2</td>
<td>12x12 resize orientation 2</td>
</tr>
<tr>
<td>16</td>
<td>Resize3</td>
<td>11x17 resize orientation 3</td>
</tr>
<tr>
<td>17</td>
<td>Resize4</td>
<td>17x11 resize orientation 4</td>
</tr>
<tr>
<td>18</td>
<td>TextInput</td>
<td>7x15 text input</td>
</tr>
</tbody>
</table>
<p>Additional cursors can be defined using the <code>VDU 23, 27, &amp;40, hotX, hotY</code> command.  For details of that command see the <a href="../Bitmaps-API/">Bitmaps API</a> documentation.  Using that API it is possible to define a custom mouse cursor using a bitmap, which can then be selected using this command passing in the 16-bit bitmapId in place of a cursorId.</p>
<h3 id="vdu-23-0-89-4-x-y-set-mouse-cursor-position"><code>VDU 23, 0, &amp;89, 4, x; y;</code>: Set mouse cursor position</h3>
<p>Explicitly moves the mouse cursor to a given position on the screen.</p>
<h3 id="vdu-23-0-89-5-x1-y1-x2-y2-reserved"><code>VDU 23, 0, &amp;89, 5, x1; y1; x2; y2;</code>: Reserved</h3>
<p>This command is reserved for future use.  It is not yet implemented.</p>
<p>(When implemented it will set the mouse area, which will restrict the mouse cursor to a given area of the screen.  The mouse cursor will not be able to leave this area.)</p>
<h3 id="vdu-23-0-89-6-samplerate-set-mouse-sample-rate"><code>VDU 23, 0, &amp;89, 6, sampleRate</code>: Set mouse sample rate</h3>
<p>Sets the rate at which mouse data will be sampled.  The rate given is a number of samples per second.  The default rate is 60.</p>
<p>Valid sample rates are 10, 20, 40, 60, 80, 100, and 200 (samples/sec).  Any other values will be ignored.</p>
<h3 id="vdu-23-0-89-7-resolution-set-mouse-resolution"><code>VDU 23, 0, &amp;89, 7, resolution</code>: Set mouse resolution</h3>
<p>Sets the mouse resolution.  Values in the range 0-3 are supported, or 255 (-1) to pick the default resolution.  The default resolution is 2.</p>
<p>The following resolutions are supported:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>1 count per mm (25 dpi)</td>
</tr>
<tr>
<td>1</td>
<td>2 counts per mm (50 dpi)</td>
</tr>
<tr>
<td>2</td>
<td>4 counts per mm (100 dpi) (default)</td>
</tr>
<tr>
<td>3</td>
<td>8 counts per mm (200 dpi)</td>
</tr>
</tbody>
</table>
<h3 id="vdu-23-0-89-8-scaling-set-mouse-scaling"><code>VDU 23, 0, &amp;89, 8, scaling</code>: Set mouse scaling</h3>
<p>Sets the mouse scaling factor.  Only values <code>1</code> and <code>2</code> are supported to indicate 1:1 or 1:2 scaling.  Additionally a value of <code>0</code> can be sent to indicate "default" scaling, which is 1:1.</p>
<h3 id="vdu-23-0-89-9-acceleration-set-mouse-acceleration"><code>VDU 23, 0, &amp;89, 9, acceleration;</code>: Set mouse acceleration</h3>
<p>This sets the mouse acceleration factor to a 16-bit value.  Setting the value to <code>0</code> will result in the default acceleration being used, which is 180.  The suggested range for this is 0-2000.</p>
<h3 id="vdu-23-0-89-10-wheelacceleration-wheelacchighbyte-set-mouse-wheel-acceleration-accepts-a-24-bit-value"><code>VDU 23, 0, &amp;89, 10, wheelAcceleration; wheelAccHighByte</code>: Set mouse wheel acceleration (accepts a 24-bit value)</h3>
<p>Sets the wheel acceleration factor to a 24-bit value.  Setting the value to <code>0</code> will result in the default acceleration being used, which is 60000.  The suggested range for this is 0-100000.</p>
<h3 id="mouse-data-packets">Mouse data packets</h3>
<p>Mouse data packets are sent in response to all of the above commands, and if the mouse has been enabled whenever the mouse is moved.  This ensures that mouse data is constantly updated in <a href="../../mos/API/#sysvars">MOS sysvars</a>.</p>
<h2 id="vdu-23-0-8a-n-set-the-cursor-start-column"><code>VDU 23, 0, &amp;8A, n</code>: Set the cursor start column §§§§</h2>
<p>This command defines the start pixel column of the text cursor.  The displayed cursor will be drawn from the start column to the end column.  The start column can be set to any value, but for the cursor to be visible it must be less than the current font width.  The default value is 0.</p>
<p>Acorn systems did not support directly adjusting the number of columns used by the cursor, and so this command is not supported on those systems and is an Agon-specific extension.</p>
<h2 id="vdu-23-0-8b-n-set-the-cursor-end-column"><code>VDU 23, 0, &amp;8B, n</code>: Set the cursor end column §§§§</h2>
<p>This command defines the end pixel column of the cursor.  The displayed cursor will be drawn from the start column to the end column.  The end column can be set to any value, but for the cursor to be visible it must be greater than the start column, and less than the current font width.  The default value is 255, which together with the default start column value ensures the cursor is the full width of the currently selected font.</p>
<p>Together with the start column, this command defines the width of the cursor.</p>
<p>If the start and end column values are equal then the cursor will be drawn as a vertical line.  If a value is given that is greater than the current font width then the cursor will be drawn to the end of the font width.</p>
<p>Acorn systems did not support directly adjusting the number of columns used by the cursor, and so this command is not supported on those systems and is an Agon-specific extension.</p>
<h2 id="vdu-23-0-8c-x-y-relative-cursor-movement-by-pixels"><code>VDU 23, 0, &amp;8C, x; y;</code>: Relative cursor movement (by pixels) §§§§§</h2>
<p>This command will move the text cursor by the given number of pixels in the X and Y directions.  The primary purpose of this command is to allow for slight adjustments of the text cursor position to facilitate text drawing features such as superscript, subscript and manual kerning.</p>
<p>Normal cursor scrolling and wrapping behaviour will be obeyed, depending on the currently set cursor behaviour.</p>
<h2 id="vdu-23-0-90"><code>VDU 23, 0, &amp;90, n, b1, b2, b3, b4, b5, b6, b7, b8</code>: Redefine character n (0-255) with 8 bytes of data §</h2>
<p>This command works identically to <code>VDU 23, n, b1, b2, b3, b4, b5, b6, b7, b8</code>, but allows characters 0-31 to also be redefined.</p>
<p>NB from Console8 VDP 2.8.0 this command will only function if the currently selected font is the system font.</p>
<h2 id="vdu-23-0-91"><code>VDU 23, 0, &amp;91</code>: Reset all system font characters to original definition §</h2>
<p>This command will reset all system font characters to their original definitions.</p>
<h2 id="vdu-23-0-92"><code>VDU 23, 0, &amp;92, char, bitmapId;</code>: Map character char to display bitmapId §§</h2>
<p>This command will map a character to a bitmap.  The bitmap ID given must be a valid bitmap in a 16 bit buffer ID.  The purpose of this command is to allow for fast and efficient drawing of bitmaps to the screen, by allowing them to be drawn as characters.</p>
<p>Any character number can be used, including those in the range of 0-31, or the usual/normal alphabetic range.  This could be used, for instance, to create a custom colour font.  It could alternatively be used with characters in the range of 128-255 to define a custom graphical tile-set, like PETSCII but in colour.</p>
<p>When a character has been mapped to use a bitmap the bitmap will be used in place of that character, and will be drawn at the current text cursor position, placing the bottom left of the bitmap at the cursor position.  The cursor position will then be moved to the right by the width of a character, and <em>not</em> by the width of the bitmap.</p>
<p>That last point is important.  It means that if you use a bitmap that is larger than a character, then the next character will overlap the bitmap.  Similarly bitmaps that are taller than a character will overwrite the line of text above the current cursor.  This can be used to create some interesting effects, but can also be a source of visual bugs if you are not careful.  If you are using oversized bitmaps, then using the <code>VDU 9</code> to move forward an additional character may be useful.</p>
<p>Bitmaps mapped to characters in this way are plotted using the current foreground GCOL paint mode.</p>
<h2 id="vdu-23-0-93-x-y-get-ascii-code-of-character-at-graphics-position-x-y"><code>VDU 23, 0, &amp;93, x; y;</code>: Get ASCII code of character at graphics position x, y §§§§§</h2>
<p>This command will return the ASCII code of the character at the given graphics position to MOS.  This command is similar to <code>VDU 23, 0, &amp;83, x; y;</code>, but uses coordinates from the currently selected graphics coordinate system.  The position is for the top left of the character.</p>
<p>This command works by comparing pixels on the screen at the given position to the currently selected font, using the currently selected text colour.  This means that it may not always be accurate, or able to succeed.  Redefining system font characters after they have been drawn, changing the font, modifying the definitions of characters within the selected font, changing the text colour, may cause this command to fail.</p>
<p>This command will not recognise characters that have been mapped to bitmaps using <code>VDU 23, 0, &amp;92, char, bitmapId;</code>.</p>
<h2 id="vdu-23-0-94-n-read-colour-palette-entry-n-returns-a-pixel-colour-data-packet"><code>VDU 23, 0, &amp;94, n</code>: Read colour palette entry n (returns a pixel colour data packet) §§</h2>
<p>This command will return the colour of the given palette entry to MOS.  This data is sent using a "screen pixel" data packet.  The corresponding <a href="../../mos/API/#sysvars">MOS sysvars</a> related to screen pixel colour will be updated to reflect the read palette entry.</p>
<p>The Agon VDP system supports a 64 colour palette, so values in the range of 0-63 will return data on that palette entry.  The following special values are also supported:</p>
<table>
<thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>128</td>
<td>The current text foreground colour</td>
</tr>
<tr>
<td>129</td>
<td>The current text background colour</td>
</tr>
<tr>
<td>130</td>
<td>The current graphics foreground colour</td>
</tr>
<tr>
<td>131</td>
<td>The current graphics background colour</td>
</tr>
</tbody>
</table>
<p>Any other colour value will not be recognise, and no response sent.</p>
<p>It should be noted that before Console8 VDP 2.7.0 when reading palette entries for the current text and graphics colours, the data packet returned would reflect back the colour number <code>n</code> sent to this command, rather than responding with the actual palette colour number for that colour.  As of Console8 VDP 2.7.0 the actual palette colour number is returned.</p>
<h2 id="vdu-23-0-95-command-args-font-management-commands"><code>VDU 23, 0, &amp;95, &lt;command&gt;, [&lt;args&gt;]</code>: Font management commands §§§§§</h2>
<p>This command is used to manage fonts on your system.  For more information please see the <a href="../Font-API/">Font API documentation</a>.</p>
<h2 id="vdu-23-0-96-flags-bufferid-set-an-affine-transform-matrix"><code>VDU 23, 0, &amp;96, &lt;flags&gt;, &lt;bufferId&gt;;</code>: Set an affine transform matrix §§§§§§</h2>
<p>As of the time of writing, this command is experimental and subject to change.  To enable it you must turn on the affine transform feature flag, using the <code>VDU 23, 0, &amp;F8, 1; 1;</code> command.</p>
<p>This command tells the graphics system to use an affine transform matrix held within the given buffer for subsequent drawing commands.  This allows for the transformation of graphics when they are drawn in a variety of ways, including scaling, rotation, and translation.</p>
<p>The <code>flags</code> field is used to indicate which parts of the graphics system should use the matrix.  The following flags bits are supported:</p>
<table>
<thead>
<tr>
<th>Bit</th>
<th>Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Bitmap</td>
<td>Apply the matrix to bitmap drawing commands</td>
</tr>
<tr>
<td>1-7</td>
<td>Reserved</td>
<td>Reserved for future use</td>
</tr>
</tbody>
</table>
<p>The <code>bufferId</code> indicates which buffer holds the matrix data to use.  The matrix is assumed to be a 3x3 matrix of 32-bit floating point values, stored in little-endian byte order.  As creating and manipulating floating point data is not supported in the eZ80 various options are provided as part of the <a href="../Buffered-Commands-API/">buffered commands API</a> to allow for the creation and manipulation of these matrices.</p>
<p>The <code>bufferId</code> set is used as a reference to the matrix.  If a matrix exists in the buffer then a copy of that will be used for all applicable drawing operations when they are performed, otherwise drawing operations will occur as if no matrix was set.  If a matrix is changed after it has been set, then the new matrix will be used for subsequent drawing operations.</p>
<p>Setting the <code>bufferId</code> to 65535 (or -1) will clear the matrix, and subsequent drawing operations will not be transformed.</p>
<p>Please note that when an affine transform is set to be applied when drawing bitmaps, the transform is always applied as if the top left of the bitmap is the "origin" point for the transform  So if an affine transform is set to only perform a rotation, then the bitmap will rotate around its top left corner.  This may be slightly contrary to expectations when using OS coordinates, as when plotting a bitmap using the PLOT command you specify the location for the bottom left of the bitmap.  So when using OS coordinates, the origin point of the transformation becomes where the top-left pixel would have been.</p>
<h2 id="vdu-23-0-98-n-turn-control-keys-on-and-off"><code>VDU 23, 0, &amp;98, n</code>: Turn control keys on and off §§§</h2>
<p>Turns control keys on and off, where 1=on (the default) and 0=off.</p>
<p>When control keys are turned on, pressing control and various letters on the keyboard will cause the keyboard to trigger VDU commands on the VDP, where the VDU command corresponds to the number of that letter in the alphabet.  For example, pressing <code>CTRL</code>+<code>N</code> will perform the VDU command <code>VDU 14</code> on the VDP and turn on "paged mode", as N is the fourteenth letter.</p>
<p>Up to and including Console8 VDP 2.4.0, only <code>CTRL</code>+<code>N</code> and <code>CTRL</code>+<code>O</code> were supported, and would send <code>VDU 14</code> and <code>VDU 15</code> respectively, enabling and disabling "paged mode".  Console8 VDP 2.5.0 added support for several more letters, specifically <code>B</code>, <code>C</code>, <code>F</code>, <code>G</code>, <code>L</code>, <code>N</code> and <code>O</code>.  <code>CTRL</code>+<code>P</code> is also supported but rather than performing a VDU 16 it will toggle the printer on and off, compatible with behaviour on BBC BASIC for Windows.  (Owing to how the VDP and the eZ80 interact, it is unlikely that any more control keys will be added in the future.)</p>
<p>When control keys are turned off, the keyboard will not trigger VDU commands on the VDP.</p>
<p>Irrespective of whether the VDP has done anything with a control key, or whether they are enabled or not, key information will always be sent through to MOS.</p>
<p>Until Console8 VDP 2.6.0, this control key behaviour on the VDP was always enabled, and could not be turned off.</p>
<p>From Console8 VDP 2.6.0 onwards, the control keys can be turned off, which may help ensure that unexpected behaviour on the VDP does not occur when using applications running on MOS that may also wish to use these control key combinations.</p>
<h2 id="vdu-23-0-99-virtualkey-request-updated-keyboard-data-for-a-key"><code>VDU 23, 0, &amp;99, virtualKey</code>: Request updated keyboard data for a key §§§§§§§</h2>
<p>This command will send an updated keycode data packet to MOS with the current state of the given key, using a vdp-gl/fab-gl virtual key code.  Usually you should not have to use this command, as the keyboard data packets are sent automatically whenever a key is pressed or released.</p>
<p>(This command is used by MOS 3.0 at boot time to determine if the left shift key is pressed to signals that the boot file should not be run from the SD card.)</p>
<h2 id="vdu-23-0-9a"><code>VDU 23,0, &amp;9A</code>: Temporarily enable paged mode §§§§§§§§</h2>
<p>This command temporarily enables the VDP's "paged mode", as if a <code>VDU 14</code> command had been sent.  Temporary paged mode remains active until one frame after the VDP no longer has any VDU commands to process, at which point the paged mode is restored to its previous setting.</p>
<p>This command is useful for applications that need to temporarily enable paged mode, but do not want to change the paged mode setting for the VDP permanently.  For example, MOS 3.0 uses this command to ensure that star commands that can output a lot of text to screen will be automatically paged.</p>
<h2 id="vdu-23-0-9b-bufferid-print-the-contents-of-a-buffer-to-the-screen"><code>VDU 23, 0, &amp;9B, bufferId;</code>: Print the contents of a buffer to the screen §§§§§§</h2>
<p>If a buffer is found with the given <code>bufferId</code>, then this command will print a buffer out to the screen, using only the raw character values. This bypasses VDU command processing, so no control characters at all are supported and will be printed as-is.</p>
<h2 id="vdu-23-0-9c-set-the-text-viewport-using-graphics-coordinates"><code>VDU 23, 0, &amp;9C</code>: Set the text viewport using graphics coordinates §§§§§</h2>
<p>Sets the text viewport using the rectangle described by the last two coordinates given via PLOT commands.  This command serves a similar purpose to <code>VDU 28</code>, but uses graphics coordinates instead of text coordinates, and does not require the coordinates to be sent as part of the command.  This allows for more flexibility in defining the viewport.</p>
<p>Whilst the graphics cursor positions can be anywhere in the coordinate space, the text viewport will be limited to appear within the screen, and will be clipped to the screen.  If the resultant viewport has zero width or height (as the coordinates were off-screen) then the command will have no effect.  This behaviour differs from <code>VDU 28</code> which would reject the command if any of the coordinates given were off-screen.</p>
<h2 id="vdu-23-0-9d-set-the-graphics-viewport-using-graphics-coordinates"><code>VDU 23, 0, &amp;9D</code>: Set the graphics viewport using graphics coordinates §§§§§</h2>
<p>Sets the graphics viewport using the rectangle described by the last two coordinates given via PLOT commands.  This command serves a similar purpose to <code>VDU 24</code>, but uses coordinates from the graphics coordinate stack, which allows for more flexibility in defining the viewport.  This can, for instance, be used to define a new viewport in coordinates that are relative to the current graphics origin.</p>
<p>As per <code>VDU 23, 0, &amp;9C</code>, the viewport will be clipped to the screen if it is off-screen.  This behaviour differs from <code>VDU 24</code> which would reject the command if any of the coordinates given were off-screen.</p>
<h2 id="vdu-23-0-9e-set-the-graphics-origin-using-graphics-coordinates"><code>VDU 23, 0, &amp;9E</code>: Set the graphics origin using graphics coordinates §§§§§</h2>
<p>Sets the graphics origin to the last coordinate given via PLOT commands.  This command serves a similar purpose to <code>VDU 29</code>, but uses coordinates from the graphics coordinate stack, which allows for more flexibility in defining the origin.  This can, for instance, be used to define a new origin in coordinates that are relative to the current origin.</p>
<h2 id="vdu-23-0-9f-move-the-graphics-origin-and-viewports"><code>VDU 23, 0, &amp;9F</code>: Move the graphics origin and viewports §§§§§</h2>
<p>Moves the graphics origin to the current graphics cursor position, and also moves the currently defined text and graphics viewports by the same relative amount that the origin has moved.</p>
<p>As with <code>VDU 23, 0, &amp;9C</code> and <code>VDU 23, 0, &amp;9D</code> the resultant text and graphics viewports will be clipped to the screen area.  This means that this command is not reversible, i.e. if you move the origin to position <code>100,100</code> and then move it to <code>-100,-100</code> the viewports will not return to their original sizes, as they will have been shrunk in the process.</p>
<h2 id="vdu-23-0-a0-bufferid-command-args-buffered-command-api"><code>VDU 23, 0, &amp;A0, &lt;bufferId&gt;, &lt;command&gt;, [&lt;args&gt;]</code>: Buffered command API **</h2>
<p>Send a command to the <a href="../Buffered-Commands-API/">VDP Buffered Commands API</a></p>
<h2 id="vdu-23-0-a1-update-vdp-for-exclusive-use-of-the-agon-flash-tool"><code>VDU 23, 0, &amp;A1</code>: Update VDP (for exclusive use of the agon-flash tool) **</h2>
<p>This command is used by the agon-flash tool to update the VDP firmware.  It should not be used by any other software.</p>
<h2 id="vdu-23-0-c0-n-turn-logical-screen-scaling-on-and-off"><code>VDU 23, 0, &amp;C0, n</code>: Turn logical screen scaling on and off *</h2>
<p>Turns logical screen scaling on and off, where 1=on and 0=off.</p>
<p>When logical scaling is turned off, the graphics system will no longer use the 1280x1024 logical coordinate system and instead use pixel coordinates.  The screen origin point at 0,0 will change to be the top left of the screen, and the Y axis will go down the screen instead of up.</p>
<p>For more information, see the <a href="../Screen-Modes/">Screen modes documentation</a>.</p>
<h2 id="vdu-23-0-c1-n-switch-legacy-modes-on-or-off"><code>VDU 23, 0, &amp;C1, n</code>: Switch legacy modes on or off **</h2>
<p>Turns legacy screen modes on and off, where 1=on and 0=off.</p>
<p>By default, the original screen modes 0-4 are not available and are instead replaced by new modes that are more compatible with modern monitors.  For compatibility with older software, written for Agon systems running earlier versions of the VDP firmware, this command can be used to switch back to those original, legacy, screen modes.</p>
<p>For more information, see the <a href="../Screen-Modes/">Screen modes documentation</a>.</p>
<h2 id="vdu-23-0-c3-swap-the-screen-buffer-andor-wait-for-vsync"><code>VDU 23, 0, &amp;C3</code>: Swap the screen buffer and/or wait for VSYNC **</h2>
<p>Swap the screen buffer (double-buffered modes only) or wait for VSYNC (all modes).</p>
<p>This command will swap the screen buffer, if the current screen mode is double-buffered, doing so at the next VSYNC.  If the current screen mode is not double-buffered then this command will wait for the next VSYNC signal before returning.  This can be used to synchronise the screen with the vertical refresh rate of the monitor.</p>
<p>Waiting for VSYNC can be useful for ensuring smooth graphical animation, as it will prevent tearing of the screen.</p>
<p>(In BASIC performing a <code>*FX 19</code> command will perform a similar wait for VSYNC, but on the eZ80 side of the system, but will not swap the screen buffer.)</p>
<h2 id="vdu-23-0-c4-command-args-copper-functions"><code>VDU 23, 0, &amp;C4, command, [&lt;args&gt;]</code>: "Copper" functions §§§§§§§</h2>
<p>Send a command to the <a href="../Copper-API/">VDP Copper API</a>.  This allows for the creation of different palettes and for the palettes to be changed on the fly during the scanout of the screen.</p>
<p>These functions were introduced in VDP 2.12.0.  At this time, to access these APIs a feature flag must be set using <code>VDU 23, 0, &amp;F8, &amp;310; 0;</code>.  The exact feature set provided may be subject to change in future versions of the VDP firmware.</p>
<h2 id="vdu-23-0-c8-command-args-context-management-api"><code>VDU 23, 0, &amp;C8, &lt;command&gt;, [&lt;args&gt;]</code>: Context management API §§§§§</h2>
<p>Send a command to the <a href="../Context-Management-API/">Context Management API</a>.  This allows management of the current graphics context, which includes the current font, text and graphics colours, and the current GCOL paint mode.</p>
<p>The context management API allows for the entire current graphics state to be saved and restored, which can be useful for applications that need to temporarily change the graphics state, but then restore it to its original state.  As part of this, the current state can be saved to a stack, and then restored later.  Additionally completely separate context stacks can be selected.</p>
<h2 id="vdu-23-0-ca-flush-current-drawing-commands"><code>VDU 23, 0, &amp;CA</code>: Flush current drawing commands §§§§§</h2>
<p>For performance reasons, all drawing commands (for both graphics and text) received by the VDP are actually placed in a queue, and are not immediately drawn to the screen.  This command will force all pending drawing commands to be processed and drawn to the screen.</p>
<p>This command is useful for some advanced operations, such as on-the-fly redefining character data in a custom font, ensuring that all characters are drawn before the font is redefined.</p>
<p>Most applications will not need to use this command, as the VDP will automatically flush the drawing queue when it receives a command that requires the screen to be updated, such as reading a screen pixel.</p>
<h2 id="vdu-23-0-f2-n-set-dot-dash-pattern-length"><code>VDU 23, 0, &amp;F2, n</code>: Set dot-dash pattern length §§§§</h2>
<p>This command sets the length of the dot-dash pattern used for drawing lines with dotted line plot codes.  The default length is 8, and the length can be set to any value between 1 and 64.  Setting a length of 0 will reset to the default length, and reset the pattern to the default pattern.</p>
<p>The line pattern can be set using <code>VDU 23, 6, n1, n2, n3, n4, n5, n6, n7, n8</code>, where <code>n1</code> is the first byte of the pattern, <code>n2</code> is the second byte, and so on.  Bits are used most-significant-bit first.</p>
<p>Support for this command was added in Console8 VDP 2.7.0.</p>
<h2 id="vdu-23-0-f8-variableid-value-set-a-vdp-variable"><code>VDU 23, 0, &amp;F8, variableId; value;</code>: Set a VDP Variable §§§§§§</h2>
<p>This command is used to set a <a href="../VDP-Variables/">VDP variable</a>.  VDP variables are used to control various features of the VDP, including enabling new functionality that may not quite be ready for general use and/or have an API that may change in the future.  They may also allow for changing various aspects of the VDP's behaviour.</p>
<p>The <code>variableId</code> is the ID of the variable to set, and the <code>value</code> is the value to set it to.  The meaning of the <code>value</code> that any particular variable is set to will be specific to the flag being set.  A value must always be provided, even if the variable does not require a value to be set.</p>
<p>For details on the variables that can be set, see the <a href="../VDP-Variables/">VDP Variables documentation</a>.</p>
<h2 id="vdu-23-0-f9-variableid-clear-a-vdp-variable"><code>VDU 23, 0, &amp;F9, variableId;</code>: Clear a VDP Variable §§§§§§</h2>
<p>This command is used to clear a VDP variable, removing them from the variable store, when possible.</p>
<p>Most VDP variables that reflect the system state information cannot be cleared, and this command will ignored attempts to clear them.</p>
<h2 id="vdu-23-0-fe-n-console-mode"><code>VDU 23, 0, &amp;FE, n</code>: Console mode **</h2>
<p>Turns "console mode" on and off, where 1=on and 0=off (the default).</p>
<p>This mode is primarily intended for use with debugging tooling.  It will reflect VDU command bytes through to a serial terminal attached to the VDPs USB port, and will attempt to pass keyboard input from the serial terminal back through the VDP to MOS.</p>
<p>This mode is not intended for general use.  If you are looking for a way to output data to the attached serial terminal then <code>VDU 2</code> is a better option.</p>
<h2 id="vdu-23-0-ff-switch-to-or-resume-terminal-mode"><code>VDU 23, 0, &amp;FF</code>: Switch to or resume "terminal mode"</h2>
<p>This command enables "terminal mode", which changes the behaviour of the VDP to be more like a traditional terminal.  This is useful for running CP/M in place of MOS on the eZ80, or other software that expects to be running on a terminal.</p>
<p>When terminal mode is enabled, VDU commands will no longer be recognised and processed, keyboard entry in BBC BASIC/MOS is no longer supported, and the VDP protocol is essentially suspended.  Instead the VDP acts as a dumb terminal, and will send all keyboard input to the eZ80's UART0.  The eZ80 can then process this input as it sees fit.</p>
<p>By default a VT100 terminal is emulated, but this can be changed by sending the appropriate escape sequences to the VDP.  Terminal support is inherited from FabGL, and so its <a href="http://www.fabglib.org/special_term_escapes.html">custom escape sequences</a> can be used to change the terminal behaviour.</p>
<p>From Console8 VDP version 2.2.0, the following additional escape sequences are supported:</p>
<table>
<thead>
<tr>
<th>Sequence</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ESC + "_#Q!$"</code></td>
<td>Quit/end terminal mode</td>
</tr>
<tr>
<td><code>ESC + "_#S!$"</code></td>
<td>Suspend terminal mode</td>
</tr>
</tbody>
</table>
<p>Quitting terminal mode returns the VDP back to normal operation, and will resume the VDP protocol.  The screen mode will be reset to the mode that was active before terminal mode was enabled.</p>
<p>Suspending terminal mode temporarily restores VDU command processing.  (Keyboard handling is unchanged.)  This could be useful to use VDU commands to perform drawing operations.  To resume terminal mode, <code>VDU 23, 0, &amp;FF</code> must be sent again.</p>
<h2 id="vdp-serial-protocol">VDP Serial Protocol</h2>
<p>Data sent from the VDP to the eZ80's UART0 is sent as a packet in the following format:</p>
<ul>
<li><code>cmd</code>: The packet command, with bit 7 set</li>
<li><code>len</code>: Number of data bytes</li>
<li><code>data</code>: The data byte(s)</li>
</ul>
<p>Words are 16 bit, and sent in little-endian format</p>
<p>In general, as a programmer using an Agon you should not need to worry about the format and contents of any of these packets, as they are handled by MOS.  On receipt of one of these packets, MOS will set <a href="../../mos/API/#sysvars">system state variables (sysvars)</a> accordingly.  It may also set a bit in the VDPProtocol status byte sysvar corresponding to the type of data packet received.</p>
<p>If you are performing a command where you need to wait for a response from the VDP, then you will need to wait for the appropriate bit to be set in the VDP protocol byte.  Before you send a command to the VDP you should clear the bit that relates to the command you are about to send.  Once the command has been processed the VDP will set the bit again.  If the bit is not set then there may have been an error processing the command.</p>
<p>Packets:</p>
<ul>
<li><code>0x00, value</code>: General Poll</li>
<li><code>0x01, keycode, modifiers, vkey, keydown</code>: Keyboard state</li>
<li><code>0x02, x, y</code>: Cursor position</li>
<li><code>0x03, char</code>: Character read from screen</li>
<li><code>0x04, r, g, b, index</code>: Pixel colour read from screen</li>
<li><code>0x05, channel, status</code>: Audio command status (see <a href="../Enhanced-Audio-API/">VDP Enhanced Audio API</a>)</li>
<li><code>0x06, width; height; cols, rows, colours</code>: Screen dimensions - width and height are words</li>
<li><code>0x07, year, month, day, dayOfYear, dayOfWeek, hour, minute, second</code>: RTC data *</li>
<li><code>0x08, delay, rate, led</code>: Keyboard status - delay and rate are words</li>
<li><code>0x09, x; y; buttons, wheelDelta, deltaX; deltaY;</code>: Mouse status - x, y, deltaX and deltaY are words</li>
</ul>
<p>* as of VDP 1.04 the RTC data is sent in a packed format, and is stored in the <a href="../../mos/API/#sysvars">MOS sysvars</a> in this packed format.  Prior to VDP 1.04 the <code>dayOfYear</code> value could be incorrect, as it cannot be guaranteed to fit into a byte.</p>
<p>MOS VDP Protocol flag bits:</p>
<table>
<thead>
<tr>
<th>Bit</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>Cursor position</td>
</tr>
<tr>
<td>1</td>
<td>Character read from screen</td>
</tr>
<tr>
<td>2</td>
<td>Point data (pixel colour) read from screen</td>
</tr>
<tr>
<td>3</td>
<td>Audio status</td>
</tr>
<tr>
<td>4</td>
<td>Mode info / Screen dimensions</td>
</tr>
<tr>
<td>5</td>
<td>RTC data</td>
</tr>
<tr>
<td>6</td>
<td>Mouse status</td>
</tr>
</tbody>
</table>
<h3 id="keyboard">Keyboard</h3>
<p>When a key is pressed, a packet is sent with the following data:
- cmd: 0x01
- keycode: The ASCII value of the key pressed
- modifiers: A byte with the following bits set (1 = pressed):
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>0. CTRL
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>1. SHIFT
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>2. ALT LEFT
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>3. ALT RIGHT
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>4. CAPS LOCK
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>5. NUM LOCK
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>6. SCROLL LOCK
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>7. GUI
</code></pre></div>
From VDP 1.03, the following key data is also returned
- vkey: The FabGL virtual keycode
- keydown: 1 if the key is down, 0 if the key is up</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections", "navigation.expand", "navigation.instant", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotate", "content.code.copy", "content.footnote.tooltips", "content.action.edit"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>