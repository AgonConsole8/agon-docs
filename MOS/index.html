
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../Theory-of-operation/">
      
      
        <link rel="next" href="../mos/Star-Commands/">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Overview - Community Agon Platform documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#system-requirements" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Community Agon Platform documentation" class="md-header__button md-logo" aria-label="Community Agon Platform documentation" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Community Agon Platform documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Overview
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="deep-purple" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="lime"  aria-label="Switch to your system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to your system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/AgonPlatform/agon-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    contribute
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Community Agon Platform documentation" class="md-nav__button md-logo" aria-label="Community Agon Platform documentation" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    Community Agon Platform documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AgonPlatform/agon-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    contribute
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Welcome & getting started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Welcome & getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Start here
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../FAQ/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Theory-of-operation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Theory of operation
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    MOS
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            MOS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      System Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-an-sd-card" class="md-nav__link">
    <span class="md-ellipsis">
      Using an SD card
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using an SD card">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#moslets" class="md-nav__link">
    <span class="md-ellipsis">
      Moslets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-run-path" class="md-nav__link">
    <span class="md-ellipsis">
      The "run path"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-script" class="md-nav__link">
    <span class="md-ellipsis">
      Automatically running a script on boot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#soft-boot" class="md-nav__link">
    <span class="md-ellipsis">
      Soft Boot
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-mos-command-line-interface" class="md-nav__link">
    <span class="md-ellipsis">
      The MOS Command Line Interface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The MOS Command Line Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-mos-line-editor" class="md-nav__link">
    <span class="md-ellipsis">
      The MOS line editor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-mos-command-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      The MOS command prompt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mos-commands" class="md-nav__link">
    <span class="md-ellipsis">
      MOS Commands
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mos-system-variables" class="md-nav__link">
    <span class="md-ellipsis">
      MOS System Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#script-files" class="md-nav__link">
    <span class="md-ellipsis">
      Script files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programs-and-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Programs and Modules
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-map" class="md-nav__link">
    <span class="md-ellipsis">
      Memory map
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-stack" class="md-nav__link">
    <span class="md-ellipsis">
      The Stack
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mos/Star-Commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Command line
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mos/API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mos/C-Functions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    C functions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mos/Executables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Executable format
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mos/Modules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Modules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mos/System-Variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mos/Argument-Substitution/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Argument Substitution
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    VDP
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            VDP
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../VDP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/VDU-Commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Main Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/Screen-Modes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Screen Modes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/PLOT-Commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PLOT Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/System-Commands/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Commands
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/Enhanced-Audio-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Audio API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/Bitmaps-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bitmaps and Sprites API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/Buffered-Commands-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Buffered Commands API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/Context-Management-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Context Management API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/Font-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Font Management API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/VDP-Variables/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    VDP Variables
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../vdp/Copper-API/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Copper Effects API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../BBC-BASIC-for-Agon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BBC Basic
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../GPIO/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GPIO
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Updating-Firmware/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Updating Firmware
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Additional resources
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Additional resources
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../External-Documentation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    External documentation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Third-Party-Projects/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Third party projects
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#system-requirements" class="md-nav__link">
    <span class="md-ellipsis">
      System Requirements
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-an-sd-card" class="md-nav__link">
    <span class="md-ellipsis">
      Using an SD card
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using an SD card">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#moslets" class="md-nav__link">
    <span class="md-ellipsis">
      Moslets
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-run-path" class="md-nav__link">
    <span class="md-ellipsis">
      The "run path"
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boot-script" class="md-nav__link">
    <span class="md-ellipsis">
      Automatically running a script on boot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#soft-boot" class="md-nav__link">
    <span class="md-ellipsis">
      Soft Boot
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-mos-command-line-interface" class="md-nav__link">
    <span class="md-ellipsis">
      The MOS Command Line Interface
    </span>
  </a>
  
    <nav class="md-nav" aria-label="The MOS Command Line Interface">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-mos-line-editor" class="md-nav__link">
    <span class="md-ellipsis">
      The MOS line editor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-mos-command-prompt" class="md-nav__link">
    <span class="md-ellipsis">
      The MOS command prompt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mos-commands" class="md-nav__link">
    <span class="md-ellipsis">
      MOS Commands
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mos-system-variables" class="md-nav__link">
    <span class="md-ellipsis">
      MOS System Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#script-files" class="md-nav__link">
    <span class="md-ellipsis">
      Script files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programs-and-modules" class="md-nav__link">
    <span class="md-ellipsis">
      Programs and Modules
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-map" class="md-nav__link">
    <span class="md-ellipsis">
      Memory map
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-stack" class="md-nav__link">
    <span class="md-ellipsis">
      The Stack
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
    <a href="https://github.com/AgonPlatform/agon-docs/edit/main/docs/MOS.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg>
    </a>
  
  


<h1 id="what-is-the-mos">What is the MOS</h1>
<p>The MOS is a command line Machine Operating System, similar to CP/M or DOS, that provides a human interface to the Agon file system.</p>
<p>It also provides the <a href="../mos/API/">MOS API</a> for programmers to use that provides some basic facilities for file I/O and other common operations for BBC BASIC and other third-party applications.</p>
<p>This documentation explains the general features of MOS, as well as commands it offers and how to use them.  It covers the Quark 1.04 version of MOS, the later Console8 MOS releases, and the Agon Platform MOS up to and including MOS 3.0.  Versions of MOS prior to Quark 1.04 may be missing some features described below.</p>
<p>Please note that if you are running Quark 1.04 or earlier, the capabilities of MOS are very limited, and quite a few features described in this documentation will not be available to you.  You are strongly advised to upgrade to a later version of MOS.  MOS 2.x and MOS 3.x releases are fully compatible with software written for Quark 1.04, and will run all Quark 1.04 software without modification.</p>
<h2 id="system-requirements">System Requirements</h2>
<p>To get the most out of MOS, you will need the following:</p>
<ul>
<li>A micro-SD card formatted as FAT32</li>
</ul>
<p>Technically MOS will work without an SD card, but you won't be able to do much with it.</p>
<h2 id="using-an-sd-card">Using an SD card</h2>
<p>MOS supports the use of an SD card to store files and <a href="../mos/Executables/">programs</a>.  The SD card must be formatted as FAT32.  This documentation previously advised that the card should be 32GB or less in size, however several users report successfully using 64GB cards.  MOS supports automatically <a href="#boot-script">running a script file on boot</a> and a way of adding new commands.</p>
<h3 id="moslets">Moslets</h3>
<p>"Moslets" are a special type of program that are intended to extend the functionality of MOS by adding in new commands.</p>
<p>By convention, moslets are stored in a special folder named <code>mos</code> at the top level of the SD card.  When you attempt to use a command that is not built into MOS, the system will look in the <code>mos</code> folder for a file with the same name as the command with a <code>.bin</code> extension.  If it finds one, it will execute that file as if it were a built-in command.</p>
<p>Moslets have a special requirement in that they must be built to run from memory address <code>0x0B0000</code> onwards.  The use of this address is intended to allow moslets to run without affecting the main user program space.  The idea being that this will let you use a moslets from within BASIC (or from within other programs) without having to worry about it overwriting your program.</p>
<p>From MOS 3.0 onwards it is possible to specify a different directory, or multiple directories, for the location of moslets on your system.  This is done by setting the <code>Moslet$Path</code> <a href="../mos/System-Variables/#system-path-variables">system variable</a>.  By default this variable is set to <code>/mos/</code> for compatibility with previous versions of MOS.</p>
<h3 id="the-run-path">The "run path"</h3>
<p>MOS 2.2.0 effectively added the concept of a "run path" to MOS, which would be used by the CLI to either search for commands not built into MOS, or to run programs.  In MOS 2.2.0 to MOS 2.3.2 the order of directories searched would be fixed, with the <code>mos</code> folder being searched first for moslets, followed by the current directory, and then the <code>bin</code> folder.  In MOS 2.x the order could not be changed.  MOS 3.0 provides a way to change this.</p>
<p>Programs located outside of the moslet folder are expected to be full standalone programs that will be run and executed at the default memory address of <code>0x040000</code>, and thus will overwrite existing programs.</p>
<p>NB there is currently no way to control the memory address that a program is automatically loaded into, so if you have a program that needs to be loaded at a specific address, you will need to use the <code>Load</code> command to load it manually and then use the <code>Run</code> command to start the program.</p>
<p>It should be noted that MOS will always run the first program it finds with the same name as the command you have entered.  This means for example that if you have a moslet with the same name as a program in the <code>bin</code> folder, the moslet will be run instead of the program.</p>
<p>From MOS 3.0 onwards the order of directories searched is controlled by the <code>Run$Path</code> <a href="../mos/System-Variables/#system-path-variables">system variable</a>.  By default this is a macro variable set to <code>&lt;Moslet$Path&gt;, ./, /bin/</code> to be compatible with previous versions of MOS.  This variable can be changed to search in any order you like, and can include multiple directories.  By changing this variable you can, for example, make it so that the <code>bin</code> folder is searched before the <code>mos</code> folder, or add additional directories to search in.</p>
<h3 id="boot-script">Automatically running a script on boot</h3>
<p>MOS has the ability to automatically run a script file on boot (power on, or a system reset).  Quite what this script does is up to you, but it could be used to set up your Agon in a particular way, or to run a program automatically.</p>
<p>The exact file that will be run, and the manner in which the file is run varies depending on which version of MOS you are using.</p>
<p>As of MOS 3, the system will first look for a boot file named <code>!boot.obey</code>, and use that as it's preferred boot script, running it using the <a href="../mos/Star-Commands/#obey"><code>obey</code> command</a>.  If that file is not present, it will look for a file named <code>autoexec.obey</code> and run that.  If neither of these are present it will fall back to working in a similar manner to Quark MOS 1.04 and MOS 2.x.  If you are running MOS 3, and have a suitably up-to-date version of the VDP firmware installed, you can prevent the boot script from being run by holding down the left "Shift" key on your keyboard during power up or reset.</p>
<p>Quark 1.04, and Console8 MOS 2.x releases will all, at boot-up time, look for a file named <code>autoexec.txt</code> in the root folder of the SD card.  The manner in which this file is executed differs slightly between Quark 1.04 and the later Console8 releases.  Quark will blindly execute the commands and silently carry on it encounters an error, and any such errors will not be reported.  The Console8 MOS 2.x releases execute the <code>autoexec.txt</code> file using the <a href="../mos/Star-Commands/#exec"><code>Exec</code> command</a> and will stop execution if there is an error in the file, reporting the error as well as which line the error occurred on.</p>
<p>If no matching script file is found, the system will simply boot to the command prompt.</p>
<p>An example script, compatible with Quark 1.04 and all later versions of MOS, follows.  This script will to set keyboard to US, load BBC BASIC from the root folder, change to the test folder, then run BASIC.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>SET KEYBOARD 1
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>LOAD bbcbasic.bin
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>CD test
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>RUN
</code></pre></div>
<p>If you are running MOS 2.2.0 or later, and <code>bbcbasic.bin</code> is in your run path (most likely in a <code>/bin</code> directory), this script could be simplified to:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>SET KEYBOARD 1
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>cd test
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>bbcbasic
</code></pre></div>
<p>MOS 3.0 allows for a great deal of customisation of your MOS environment, including the ability to set up custom command aliases, set "run types" to allow all sorts of files to be directly run from the command line, a custom command prompt, adjust the "run path" that will be searched for commands and executables, and many other features.  Many of these features are controlled through the use of <a href="../mos/System-Variables/">system variables</a>.  It is common to have a <code>!boot.obey</code> that will set up system variables to customise your MOS environment.</p>
<p>MOS 3.0's preferred use of <code>!boot.obey</code> means that if you have more than one Agon computer running different versions of MOS then you can use the same SD card in all of them.  This would allow your MOS 3 system to use commands in its <code>!boot.obey</code> file that are not available in Quark MOS 1.04 or MOS 2, and those systems will still run the separate <code>autoexec.txt</code> file.  Your <code>!boot.obey</code> file could include commands specific to MOS 3, and finish with the command <code>exec autoexec.txt</code> to run the boot file used by earlier versions of MOS.</p>
<h2 id="soft-boot">Soft Boot</h2>
<p>Pressing <code>CTRL+ALT+DEL</code> will reboot MOS on the eZ80. (<code>CTRL+SHIFT+ESC</code> for MOS 1.02 or earlier)</p>
<p>NB:  This assumes that MOS is still talking to the VDP, as it is the VDP that is responsible for detecting keypresses.  Sometimes a soft reboot key combination will therefore not work, and you may need to instead press the reset button on your Agon.</p>
<p>If you are using a MOS version earlier than 2.2.0, then a soft reset will not try to run the boot script.  To make sure the boot script runs you would need to do a "hard boot" by powering cycling your Agon (turn it off, then on again), or pressing the reset button.</p>
<h2 id="the-mos-command-line-interface">The MOS Command Line Interface</h2>
<p>MOS provides a command line interface (CLI) that allows you to interact with the Agon file system and perform some basic control over your Agon computer.</p>
<p>The MOS CLI is loosely inspired by the Acorn MOS present in the BBC Micro and later Acorn computer systems like the Archimedes.  The features and facilities supported by the MOS command line have evolved over time, with MOS 3.0 supporting many more commands than earlier versions of MOS.</p>
<p>MOS works alongside the Agon's VDP, using the facilities of the VDP to display text on the screen and accept input from the keyboard.  The VDP provides some useful facilities, such as a "paged mode" that will stop the screen from scrolling until you press the <code>SHIFT</code> key to continue, or <code>ESCAPE</code> to exit.  Paged mode can be toggled on and off by pressing <code>CTRL+N</code> and <code>CTRL+O</code> respectively.</p>
<p>In MOS 3 (when used with VDP 2.14.0 or later) the MOS CLI can also <a href="../mos/System-Variables/#autopaged">automatically use paged mode</a> with commands that produce a lot of output.</p>
<h3 id="the-mos-line-editor">The MOS line editor</h3>
<p>MOS provides a simple line editor that allows you to edit the current command line before submitting it to the system.  This same line editor is available for third-party applications like BBC BASIC to use.</p>
<p>The line editor allows you to move the cursor around the current line of text, insert and delete characters, and submit the line to the system.  Whilst much of the functionality on Agon is inspired by the BBC Micro, the line editor differs - there is no "copy" cursor system on the Agon.  This line editor is similar to those that you will find on modern operating systems like MacOS, Linux or Windows.</p>
<p>The MOS CLI line editor will also provide some basic command history, keeping track of the last 16 commands the user has entered.  Pressing the <code>UP</code> arrow key when at the beginning of a line will replace the current line with the last entered command.  Similarly pressing the <code>DOWN</code> arrow key at the end of a line will cycle through the command history in the opposite direction.  The <code>HOME</code> and <code>END</code> keys will move the cursor to the start and end of the current line respectively.</p>
<p>The Console8 MOS 2.2.0 release also adds support for pressing the <code>PAGE UP</code> and <code>PAGE DOWN</code> keys to quickly step through the command history.</p>
<p>Also added to the 2.2.0 release is "tab completion".  If you start typing a command and then press the <code>TAB</code> key, MOS will attempt to complete the command for you.  This includes both built-in commands, moslets found in the <code>mos</code> folder, programs found in the current directory, and programs found in the <code>bin</code> folder, or file names within the current directory.  In MOS 3.0 onwards, the tab completion uses the <code>Run$Path</code> variable to determine where to look for commands.</p>
<p>There is also support for programmable function keys in the 2.2.0 release.  For more information on that see the <a href="../mos/Star-Commands/#hotkey"><code>Hotkey</code> command</a>.</p>
<h3 id="the-mos-command-prompt">The MOS command prompt</h3>
<p>On versions of MOS prior to the 2.2.0 release, the MOS command prompt is a simple <code>*</code> character.  This is the point at which you can enter commands to the system.</p>
<p>From the Console8 MOS 2.2.0 release onwards the prompt has been extended to include the current directory.  This is to help you keep track of where you are in the file system.  The prompt will look something like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>/programs *
</code></pre></div>
<p>MOS 3.0 allows you to customise the prompt using the <a href="../mos/System-Variables/#cli"><code>CLI$Prompt</code> system variable</a>.  By default this is set to a macro to display a prompt identical to that introduced in MOS 2.2.0.  If this variable is unset, then the prompt will revert to the simple <code>*</code> character.</p>
<h2 id="mos-commands">MOS Commands</h2>
<p>MOS offsets a number of inbuilt commands that allow you to interact with the Agon file system and control your computer.</p>
<p>The various commands available in MOS are described in the <a href="../mos/Star-Commands/">MOS Command Reference</a>.  The exact array of built-in commands available has changed over time with new commands being added, and new features added to existing commands.</p>
<p>As of MOS 3.0 the command interpreter has become fairly sophisticated.  It will support user-defined <a href="../mos/System-Variables/#command-aliases">commands aliases</a>, and the use of <a href="../mos/System-Variables/">system variables</a>.  As well as the ability to run <a href="#moslets">moslets</a> and program files directly (as <a href="#the-run-path">described above</a>) it can now also directly run any file that has a <a href="../mos/System-Variables/#file-type-variables">"run type"</a> set up for it by simply typing the name of the file.</p>
<h2 id="mos-system-variables">MOS System Variables</h2>
<p>From MOS 3.0 onwards, MOS supports the concept of <a href="../mos/System-Variables/">system variables</a>.  These can be used for user programs, as well as providing ways to gain information about the system and control the behaviour of MOS.</p>
<h2 id="script-files">Script files</h2>
<p>All Agon Platform and Console8 MOS releases support the concept of a script file.  This is a file that contains a series of MOS commands that can be executed in sequence.  This is useful for automating tasks, or for setting up your Agon in a particular way.  When a script file is run, if an error is encountered the system will stop executing the script and report the error, as well as which line the error occurred on.</p>
<p>The first type of script file is an "Exec" file, which is a simple text file containing a series of MOS commands, one per line.  You can run an Exec file using the <a href="../mos/Star-Commands/#exec"><code>Exec</code> command</a>.</p>
<p>MOS 3.0 has added a second type of script file, which  is an "Obey" file, which are run using the <a href="../mos/Star-Commands/#obey"><code>Obey</code> command</a>.  This is very similar to an Exec file, but when running an Obey file the system will set a <a href="../mos/System-Variables/#obey-files">system variable</a> to indicate the directory inside which the Obey file is located, and it will also support <a href="../mos/Argument-Substitution/">argument substitution</a>.</p>
<p>Quark MOS 1.04 only supports a single script file, <code>autoexec.txt</code> that will be run at boot, and offers no command to run a script file.</p>
<h2 id="programs-and-modules">Programs and Modules</h2>
<p>Executable program files on MOS need to be in a specific format.  This is described in the <a href="../mos/Executables/">Executable file format</a> documentation.</p>
<p>A future version of MOS is also likely to support the concept of <a href="../mos/Modules/">"modules"</a>.  This will be a way to extend the functionality of MOS to add in new features, whether they are commands, APIs or something else.  The exact details of the module system are still in development.</p>
<h2 id="memory-map">Memory map</h2>
<p>Addresses are 24-bit, unless otherwise specified</p>
<ul>
<li><code>&amp;000000 - &amp;01FFFF</code>: MOS (Flash ROM)</li>
<li><code>&amp;040000 - &amp;0AFFFF</code>: User RAM *</li>
<li><code>&amp;0B0000 - &amp;0B7FFF</code>: <a href="#moslets">Moslet</a>/<a href="../mos/Modules/">Module</a> memory space</li>
<li><code>&amp;0B8000 - &amp;0BBFFF</code>: Reserved for MOS</li>
<li><code>&amp;0BC000 - 0BFFFFF</code>: Global (MOS) heap and stack</li>
<li>...</li>
<li><code>&amp;B7E000 - &amp;B7FFFF</code>: The eZ80's 8kb of internal (fast) RAM</li>
</ul>
<p>* Technically, user programs can actually use the whole RAM space from <code>&amp;040000</code> to <code>&amp;0BBFFF</code>, but programs that use memory above <code>&amp;0AFFFF</code> may have limitations.  A program that uses the moslet/module memory space for instance will not be able to use moslet-based commands, and when modules are introduced will have limitations on access to functionality provided by modules.  Programs should need to indicate in their <a href="../mos/Executables/#advanced-header">header</a> whether they are "module safe" or "module compatible".  Guidance on how to make your program "module safe" will be provided in the <a href="../mos/Modules/">MOS Modules</a> documentation.</p>
<h2 id="the-stack">The Stack</h2>
<p>Up to and including the MOS 3.0 release, MOS sets up a stack pointer for its own use.  As MOS is written to run in the eZ80's "ADL" mode, this means the <code>SPL</code> register, the version of <code>SP</code> visible to ADL-mode code, is what is set up.  Programs that are run in ADL-mode will see this stack pointer when they start up.  Care should therefore be taken to ensure that the stack pointer is not corrupted by the program, as this will affect the operation of MOS and any other programs that are run after it.</p>
<p>The architecture of the eZ80 means that programs running in Z80 mode see a different version of the stack pointer <code>SP</code> register, known as <code>SPS</code>.  This value is <em>not</em> set up by MOS, and is left to the user program to set up.  The value of <code>SP</code> in Z80 mode should be treated by programs as undefined on startup.</p>
<p>Future versions of MOS may change the behaviour of the stack pointer for ADL-mode code in order to provide better protection for the MOS stack.  For compatibility with existing software, a stack pointer will still be set up for programs that use ADL-mode, but this may be allocated within the MOS heap space.</p>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "navigation.expand", "navigation.instant", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotate", "content.code.copy", "content.footnote.tooltips", "content.action.edit"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>